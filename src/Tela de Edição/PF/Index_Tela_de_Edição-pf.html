<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard do Usuário</title>
    <link rel="stylesheet" href="/src/Tela de Edição/PF/style_Tela_de_Edição-pf.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/src/Tela de Edição/PF/script_Tela_de_Edição-pf.js" defer></script>
  </head>
  <body>
    <div class="header">
      <header>
        <div class="left-group">
          <div class="menu-icon" onclick="toggleMenu()">
            <i class="fa-solid fa-bars menu-button"></i>
          </div>
          <div class="header-item">
            <img src="/src/imagens/Logo site.png" alt="Logo" class="logo" />
          </div>
        </div>

        <div class="center-group">
          <div class="search-container">
            <input
              type="text"
              id="search-bar"
              placeholder="Pesquisar..."
              class="search-bar"
            /><a class="search-button" id="search-button" href="#"
              ><i class="fa-solid fa-magnifying-glass search-icon"></i
            ></a>
          </div>
        </div>

        <div class="right-group">
          <div class="user-actions">
            <a href="/src/perfil/perfil.html">
              <i class="fa-regular fa-circle-user"></i>
            </a>
          </div>
        </div>

        <nav class="dropdown-menu" id="dropdownMenu">
          <ul>
            <li>
              <a class="perfil" href="/src/perfil/perfil.html">Perfil</a>
            </li>

            <li>
              <a
                class="editar-dashboard"
                href="/src/Tela de Edição/Index_Tela_de_Edição-pf.html"
                >Edite seu Dashboard</a>
            </li>
            <li class="has-submenu">
              Conteúdo Didático
              <ul class="submenu">
                <li class="has-submenu">
                  Finanças pessoais
                  <ul class="submenu">
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-pessoais/planejamento-financeiro/planejamento-financeiro.html"
                        onclick="registrarConteudoVisto('Planejamento financeiro', '/src/conteudo-didatico/Logado/Logado-pf/financas-pessoais/planejamento-financeiro/planejamento-financeiro.html', '/src/imagens/PlanejamentoFinanceiro.jpg')"
                        >Planejamento financeiro</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-pessoais/orcamento-domestico/orcamento-domestico.html"
                        onclick="registrarConteudoVisto('Orçamento doméstico')"
                        >Orçamento doméstico</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-pessoais/controle-de-dividas/controle-de-dividas.html"
                        onclick="registrarConteudoVisto('Controle de dívidas')"
                        >Controle de dívidas</a>
                    </li>
                  </ul>
                </li>

                <li class="has-submenu">
                  Finanças corporativas
                  <ul class="submenu">
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-corporativas/analise-de-balanco/analise-de-balanco.html"
                        onclick="registrarConteudoVisto('Análise de balanços')"
                        >Análise de balanços</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-corporativas/fluxo-de-caixa/fluxo-de-caixa.html"
                        onclick="registrarConteudoVisto('Fluxo de Caixa')"
                        >Fluxo de Caixa</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/financas-corporativas/captacao-de-recursos/captacao-de-recursos.html"
                        onclick="registrarConteudoVisto('Captação de Recursos')"
                        >Captação de Recursos</a>
                    </li>
                  </ul>
                </li>

                <li class="has-submenu">
                  Operações bancárias
                  <ul class="submenu">
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/operacoes-bancarias/cartao-de-debito/cartao-de-debito.html"
                        onclick="registrarConteudoVisto('Cartão de Débito')"
                        >Cartão de Débito</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/operacoes-bancarias/cartao-de-credito/cartao-de-credito.html"
                        onclick="registrarConteudoVisto('Cartão de Crédito')"
                        >Cartão de Crédito</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/operacoes-bancarias/Emprestimo/Emprestimo.html"
                        onclick="registrarConteudoVisto('Emprestimo')"
                        >Empréstimo</a>
                    </li>

                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/operacoes-bancarias/Financiamento/Financiamento.html"
                        onclick="registrarConteudoVisto('Financiamento')"
                        >Financiamento</a>
                    </li>

                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/operacoes-bancarias/taxas-e-tarifas/taxas-e-tarifas.html"
                        onclick="registrarConteudoVisto('Taxas e Tarifas')"
                        >Taxas e Tarifas</a>
                    </li>
                  </ul>
                </li>

                <li class="has-submenu">
                  Investimentos Corporativos
                  <ul class="submenu">
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-corporativos/renda-fixa-pj/renda-fixa-pj.html"
                        onclick="registrarConteudoVisto('Renda fixa-PJ')"
                        >Renda fixa PJ</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-corporativos/renda-variavel-pj/renda-variavel-pj.html"
                        onclick="registrarConteudoVisto('Renda variável-PJ')"
                        >Renda variável PJ</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-corporativos/fundo-de-investimentos-pj/fundo-de-investimentos-pj.html"
                        onclick="registrarConteudoVisto('Fundos de investimento-PJ')"
                        >Fundos de investimento PJ</a>
                    </li>
                  </ul>
                </li>

                <li class="has-submenu">
                  Investimentos Pessoais
                  <ul class="submenu">
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-pessoais/renda-fixa-pf/renda-fixa-pf.html"
                        onclick="registrarConteudoVisto('Renda fixa-PF')"
                        >Renda fixa PF</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-pessoais/renda-variavel-pf/renda-variavel-pf.html"
                        onclick="registrarConteudoVisto('Renda variável-PF')"
                        >Renda variável PF</a>
                    </li>
                    <li>
                      <a
                        class="submenu-btn-link"
                        href="/src/conteudo-didatico/investimentos-pessoais/fundo-de-investimentos-pf/fundo-de-investimentos-pf.html"
                        onclick="registrarConteudoVisto('Fundos de investimento-PF')"
                        >Fundos de investimento PF</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              <a class="FAQ" href="/src/Feedback/feedback.html">FAQ</a>
            </li>
            <li>
              <a class="Sair" href="/src/Homepage.html">Sair</a>
            </li>
          </ul>
        </nav>
      </header>
    </div>

    <main class="main-content">
      <p id="dashboard-titulo">Dashboard de Fulano</p>

      <div class="filtros-dashboard">
        <div class="seletor-filtro">
          <label for="ano-filtro">Filtrar por Ano:</label>
          <select id="ano-filtro" onchange="atualizarFiltros()"></select>

          <label for="mes-filtro">Filtrar por Mês:</label>
          <select id="mes-filtro" onchange="atualizarFiltros()">
            <option value="">Todos os Meses</option>
            <option value="01">Janeiro</option>
            <option value="02">Fevereiro</option>
            <option value="03">Março</option>
            <option value="04">Abril</option>
            <option value="05">Maio</option>
            <option value="06">Junho</option>
            <option value="07">Julho</option>
            <option value="08">Agosto</option>
            <option value="09">Setembro</option>
            <option value="10">Outubro</option>
            <option value="11">Novembro</option>
            <option value="12">Dezembro</option>
          </select>

          <button class="Historico" onclick="openModal('historico')">
            Histórico
          </button>
        </div>
      </div>

      <div class="charts-grid">
        <div class="chart-container">
          <canvas id="pieChart"></canvas>
          <h3>Entradas vs Saídas</h3>
        </div>

        <div class="chart-container">
          <canvas id="lineChart"></canvas>
          <h3>Evolução do Saldo</h3>
        </div>

        <div class="chart-container">
          <canvas id="comparativeBarChart"></canvas>
          <h3>Comparação Mensal</h3>
        </div>
      </div>

      <div class="atualizar">
        <h3>Atualizar</h3>

        <div class="botoes-acao">
          <button class="Entradas" onclick="openModal('entradas')">
            Entradas
          </button>

          <button class="Saidas" onclick="openModal('saidas')">Saídas</button>

          <button class="Remover" onclick="openRemoveModal()">
            Remover Dados
          </button>

          <input
            type="submit"
            class="input-confirmar"
            value="Salvar alterações"
            onclick="renderDashboard()"
          />
        </div>
      </div>
    </main>

    <div class="overlay" id="overlay" onclick="closeModal()"></div>

    <div class="modal" id="modal-entradas">
      <h2>Atualização de Entrada</h2>
      <label>DATA</label><br />
      <input class="data" type="date" id="entrada-data" /><br />
      <label>VALOR DE ENTRADA</label><br />
      <input class="entrada" type="number" id="entrada-valor" /><br />

      <label>CATEGORIA</label><br />
      <select id="entrada-categoria">
        <option value="" disabled selected>Seleção</option>
        <option value="salario">Salário</option>
        <option value="investimentos">Investimentos</option>
        <option value="lucros">Lucros</option>
        <option value="outros_entrada">Outros</option>
      </select><br />
      <label>DESCRIÇÃO (Opcional)</label><br />
      <input class="descricao" type="text" id="entrada-descricao" /><br />
      <label>É RECORRENTE?</label><br />
      <input
        type="radio"
        id="entrada-recorrente-sim"
        name="entrada-recorrente"
        value="sim"
      />
      <label for="entrada-recorrente-sim">SIM</label>
      <input
        type="radio"
        id="entrada-recorrente-nao"
        name="entrada-recorrente"
        value="nao"
        checked
      />
      <label for="entrada-recorrente-nao">NÃO</label><br />

      <div
        id="entrada-opcoes-recorrentes"
        style="display: none; margin-top: 10px"
      >
        <label for="entrada-frequencia">Frequência:</label><br />
        <select id="entrada-frequencia">
          <option value="mensal">Mensal</option>
          <option value="semanal">Semanal</option>
          <option value="diaria">Diária</option>
          <option value="personalizada">Personalizada</option>
        </select>
      </div>

      <button onclick="salvarEntrada()">Salvar</button>
    </div>

    <div class="modal" id="modal-saidas">
      <h2>Atualização de Saída</h2>
      <label>DATA</label><br />
      <input class="data" type="date" id="saida-data" /><br />
      <label>VALOR DE SAÍDA</label><br />
      <input class="saida" type="number" id="saida-valor" /><br />

      <label>CATEGORIA</label><br />
      <select id="saida-categoria">
        <option value="" disabled selected>Seleção</option>
        <option value="alimentacao">Alimentação</option>
        <option value="transporte">Transporte</option>
        <option value="lazer">Lazer</option>
        <option value="moradia">Moradia</option>
        <option value="educacao">Educação</option>
        <option value="saude">Saúde</option>
        <option value="contas">Contas</option>
        <option value="outros_saida">Outros</option>
      </select><br />
      <label>DESCRIÇÃO (Opcional)</label><br />
      <input class="descricao" type="text" id="saida-descricao" /><br />

      <label>É RECORRENTE?</label><br />
      <input
        type="radio"
        id="saida-recorrente-sim"
        name="saida-recorrente"
        value="sim"
      />
      <label for="saida-recorrente-sim">SIM</label>
      <input
        type="radio"
        id="saida-recorrente-nao"
        name="saida-recorrente"
        value="nao"
        checked
      />
      <label for="saida-recorrente-nao">NÃO</label><br />

      <div
        id="saida-opcoes-recorrentes"
        style="display: none; margin-top: 10px"
      >
        <label for="saida-frequencia">Frequência:</label><br />
        <select id="saida-frequencia">
          <option value="mensal">Mensal</option>
          <option value="semanal">Semanal</option>
          <option value="diaria">Diária</option>
          <option value="personalizada">Personalizada</option>
        </select>
      </div>

      <button onclick="salvarSaida()">Salvar</button>
    </div>

    <div class="modal" id="modal-remover">
      <h2>Remover Dados</h2>
      <label for="tipo-remocao">Tipo de Dados:</label><br />
      <select id="tipo-remocao" onchange="loadTransactionsForRemoval()">
        <option value="" disabled selected>Selecione</option>
        <option value="entradas">Entrada</option>
        <option value="saidas">Saída</option>
      </select><br /><br />
      <div id="lista-transacoes-remocao" class="lista-transacoes-remocao">
        </div>
      <button onclick="confirmRemoveSelected()">Remover</button>
    </div>

    <div class="modal" id="modal-historico">
      <h2>Histórico de Transações</h2>
      <div class="seletor-filtro">
        <label for="historico-ano-filtro">Filtrar por Ano:</label>
        <select
          id="historico-ano-filtro"
          onchange="populateHistoricoModal()"
        ></select>
        <label for="historico-mes-filtro">Filtrar por Mês:</label>
        <select
          id="historico-mes-filtro"
          onchange="populateHistoricoModal()"
        >
          <option value="">Todos os Meses</option>
          <option value="01">Janeiro</option>
          <option value="02">Fevereiro</option>
          <option value="03">Março</option>
          <option value="04">Abril</option>
          <option value="05">Maio</option>
          <option value="06">Junho</option>
          <option value="07">Julho</option>
          <option value="08">Agosto</option>
          <option value="09">Setembro</option>
          <option value="10">Outubro</option>
          <option value="11">Novembro</option>
          <option value="12">Dezembro</option>
        </select>
      </div>
      <div id="historico-lista" class="historico-lista">
        <div class="historico-colunas">
          <div class="coluna-entradas">
            <h3>Entradas</h3>
            <ul id="lista-entradas">
              <p>Carregando histórico de entradas...</p>
            </ul>
          </div>
          <div class="coluna-saidas">
            <h3>Saídas</h3>
            <ul id="lista-saidas">
              <p>Carregando histórico de saídas...</p>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>